# LoveMemory AI - Ultimate Recommendation System

üåü **Production-ready AI —Å–∏—Å—Ç–µ–º–∞ –¥–ª—è —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π –≤ –æ—Ç–Ω–æ—à–µ–Ω–∏—è—Ö**

–ü–æ–ª–Ω–æ—Ü–µ–Ω–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞, –æ–±—ä–µ–¥–∏–Ω—è—é—â–∞—è –≤—Å–µ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–µ –ø–æ–¥—Ö–æ–¥—ã –º–∞—à–∏–Ω–Ω–æ–≥–æ –æ–±—É—á–µ–Ω–∏—è –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –ø–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π —Å–≤–∏–¥–∞–Ω–∏–π –∏ –ø–æ–¥–∞—Ä–∫–æ–≤ –¥–ª—è –ø–∞—Ä.

## üéØ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ —Ñ–∞–∑—ã (1-7)

### –§–∞–∑–∞ 1-3: –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –∏ –¥–∞–Ω–Ω—ã–µ ‚úÖ
- **–°–∏–Ω—Ç–µ—Ç–∏—á–µ—Å–∫–∏–µ –¥–∞–Ω–Ω—ã–µ**: 4,000 –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π, 2,000 –ø–∞—Ä, 227,735 –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–π
- **6 –∞—Ä—Ö–µ—Ç–∏–ø–æ–≤ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π**: ArtLovers, Gamers, Gourmets, Fitness, Travelers, Adventurers
- **–†–µ–∞–ª–∏—Å—Ç–∏—á–Ω—ã–µ –ø—Ä–æ—Ñ–∏–ª–∏**: –∏–Ω—Ç–µ—Ä–µ—Å—ã, —è–∑—ã–∫–∏ –ª—é–±–≤–∏, –±—é–¥–∂–µ—Ç–Ω—ã–µ –ø—Ä–µ–¥–ø–æ—á—Ç–µ–Ω–∏—è
- **Product catalog**: 12 —Ç–æ–≤–∞—Ä–æ–≤/–º–µ—Å—Ç —Å –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞–º–∏ –∏ —Ç–µ–≥–∞–º–∏

### –§–∞–∑–∞ 4: Content-Based —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ ‚úÖ
- **Weighted scoring**: interest_overlap (60%) + distance_score (20%) + price_match (20%)
- **Haversine distance**: –≥–µ–æ–ª–æ–∫–∞—Ü–∏–æ–Ω–Ω–æ–µ —Å—Ö–æ–¥—Å—Ç–≤–æ —Å –≥–∞—É—Å—Å–æ–≤—ã–º —Å–≥–ª–∞–∂–∏–≤–∞–Ω–∏–µ–º
- **–ü–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∞—Ü–∏—è**: —É—á–µ—Ç –ø–æ—Å–ª–µ–¥–Ω–∏—Ö 20 —Å–æ–±—ã—Ç–∏–π –¥–ª—è boost —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π
- **–ú–µ—Ç—Ä–∏–∫–∏**: Precision@10, Recall@10, NDCG@10

### –§–∞–∑–∞ 5: Collaborative Filtering ‚úÖ
- **SVD –º–æ–¥–µ–ª—å**: TruncatedSVD —Å 5 —Ñ–∞–∫—Ç–æ—Ä–∞–º–∏ –¥–ª—è —Ä–∞–∑—Ä–µ–∂–µ–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- **–ö—Ä–æ—Å—Å-–≤–∞–ª–∏–¥–∞—Ü–∏—è**: 5-fold —Å –º–µ—Ç—Ä–∏–∫–∞–º–∏ RMSE/MAE/NDCG
- **–û—Ç–ª–∏—á–Ω—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã**: RMSE=2.470, MAE=2.004, NDCG@10=0.915
- **–ì–∏–±—Ä–∏–¥–Ω–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è**: –æ–±—ä–µ–¥–∏–Ω–µ–Ω–∏–µ —Å Content-Based (60%/40%)

### –§–∞–∑–∞ 6: Embeddings + ANN –ø–æ–∏—Å–∫ ‚úÖ
- **Sentence Transformers**: paraphrase-multilingual-MiniLM-L12-v2 (384D)
- **–í–µ–∫—Ç–æ—Ä–∏–∑–∞—Ü–∏—è**: –ø—Ä–æ—Ñ–∏–ª–∏ –ø–∞—Ä + –æ–ø–∏—Å–∞–Ω–∏—è —Ç–æ–≤–∞—Ä–æ–≤
- **Faiss –∏–Ω–¥–µ–∫—Å—ã**: IndexFlatL2 –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ ANN –ø–æ–∏—Å–∫–∞
- **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å**: P95 latency < 300ms, –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ

### –§–∞–∑–∞ 7: Learning to Rank ‚úÖ
- **LightGBM Ranker**: objective=lambdarank —Å NDCG –º–µ—Ç—Ä–∏–∫–æ–π
- **40+ —Ñ–∏—á–µ–π**: scores –æ—Ç –≤—Å–µ—Ö –º–æ–¥–µ–ª–µ–π + –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ + –∫–æ–Ω—Ç–µ–∫—Å—Ç
- **Group K-Fold CV**: –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ –ø–æ –ø–∞—Ä–∞–º –¥–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–π –≤–∞–ª–∏–¥–∞—Ü–∏–∏
- **Feature importance**: –∞–Ω–∞–ª–∏–∑ –≤–∞–∂–Ω–æ—Å—Ç–∏ —Ñ–∏—á–µ–π –¥–ª—è –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∏—Ä—É–µ–º–æ—Å—Ç–∏

## üöÄ Ultimate AI Service

**–ò–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω–æ–µ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –º–µ—Ç–æ–¥–æ–≤**:
1. **Learning to Rank** (–ª—É—á—à–∏–π) ‚Üí Enhanced Hybrid ‚Üí Basic Hybrid ‚Üí Content-only
2. **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π fallback** –ø—Ä–∏ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
3. **–ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ** –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
4. **–ö–æ–Ω—Ç–µ–∫—Å—Ç–Ω—ã–µ —Ñ–∏–ª—å—Ç—Ä—ã** (–±—é–¥–∂–µ—Ç, –∫–∞—Ç–µ–≥–æ—Ä–∏–∏, –≤—Ä–µ–º—è)

## üìä –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

```
Ultimate AI Service
‚îú‚îÄ‚îÄ Content-Based Recommender (–∏–Ω—Ç–µ—Ä–µ—Å—ã + –≥–µ–æ–ª–æ–∫–∞—Ü–∏—è)
‚îú‚îÄ‚îÄ Collaborative Filtering (SVD –Ω–∞ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è—Ö)
‚îú‚îÄ‚îÄ Embedding Service (—Å–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∏–π –ø–æ–∏—Å–∫)
‚îî‚îÄ‚îÄ Learning to Rank (—Ñ–∏–Ω–∞–ª—å–Ω–æ–µ —Ä–∞–Ω–∂–∏—Ä–æ–≤–∞–Ω–∏–µ)
```

## üõ†Ô∏è –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –∑–∞–ø—É—Å–∫

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
pip install -r requirements.txt

# –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Å–∏–Ω—Ç–µ—Ç–∏—á–µ—Å–∫–∏—Ö –¥–∞–Ω–Ω—ã—Ö (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ)
python generate_synthetic.py

# –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ–π —Å–∏—Å—Ç–µ–º—ã
python test_ultimate_system.py

# –ó–∞–ø—É—Å–∫ Ultimate AI Service
python ultimate_ai_service.py

# –ó–∞–ø—É—Å–∫ FastAPI —Å–µ—Ä–≤–µ—Ä–∞ (production)
uvicorn ultimate_ai_service:app --host 0.0.0.0 --port 8001
```

## üîå API Endpoints

### Ultimate —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏
```bash
POST /api/ai/recommend/ultimate
{
  "pair_id": "string",
  "top_k": 10,
  "user_location": [55.7558, 37.6176],
  "context": {
    "max_price": 3000,
    "preferred_categories": ["restaurant", "entertainment"]
  }
}
```

### –°–∏—Å—Ç–µ–º–Ω—ã–π —Å—Ç–∞—Ç—É—Å
```bash
GET /api/ai/status
```

### –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –≤–µ—Å–æ–≤
```bash
PUT /api/ai/weights
{
  "content_weight": 0.4,
  "cf_weight": 0.3,
  "embedding_weight": 0.3
}
```

### Feature importance
```bash
GET /api/ai/feature-importance
```

## üìà –ú–µ—Ç—Ä–∏–∫–∏ –∫–∞—á–µ—Å—Ç–≤–∞

| –ú–æ–¥–µ–ª—å | Precision@10 | Recall@10 | NDCG@10 | Latency |
|--------|-------------|-----------|---------|---------|
| Content-Based | 0.125 | 0.087 | 0.156 | ~50ms |
| Collaborative Filtering | 0.089 | 0.104 | 0.915 | ~30ms |
| Enhanced Hybrid | 0.142 | 0.156 | 0.287 | ~80ms |
| Learning to Rank | **0.185** | **0.203** | **0.342** | ~120ms |

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

**–ü–æ–ª–Ω—ã–π —Ç–µ—Å—Ç –≤—Å–µ—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤**:
```bash
python test_ultimate_system.py
```

**–ò–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ**:
```bash
# Content-Based
python content_recommender.py

# Collaborative Filtering  
python collaborative_filtering.py

# Embeddings
python embedding_service.py

# Learning to Rank
python learning_to_rank_service.py

# Enhanced Hybrid
python hybrid_recommender_enhanced.py
```

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–æ–≤

```
ai/
‚îú‚îÄ‚îÄ data/synthetic_v1/           # –°–∏–Ω—Ç–µ—Ç–∏—á–µ—Å–∫–∏–µ –¥–∞–Ω–Ω—ã–µ
‚îú‚îÄ‚îÄ models/                      # –°–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã–µ –º–æ–¥–µ–ª–∏
‚îú‚îÄ‚îÄ embeddings_store/            # –í–µ–∫—Ç–æ—Ä–Ω—ã–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è
‚îú‚îÄ‚îÄ content_recommender.py       # –§–∞–∑–∞ 4: Content-Based
‚îú‚îÄ‚îÄ collaborative_filtering.py   # –§–∞–∑–∞ 5: CF
‚îú‚îÄ‚îÄ hybrid_recommender.py        # –ë–∞–∑–æ–≤–∞—è –≥–∏–±—Ä–∏–¥–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞
‚îú‚îÄ‚îÄ embedding_service.py         # –§–∞–∑–∞ 6: Embeddings + ANN
‚îú‚îÄ‚îÄ learning_to_rank_service.py  # –§–∞–∑–∞ 7: LTR
‚îú‚îÄ‚îÄ hybrid_recommender_enhanced.py # Enhanced Hybrid
‚îú‚îÄ‚îÄ ultimate_ai_service.py       # –§–∏–Ω–∞–ª—å–Ω–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è
‚îú‚îÄ‚îÄ test_ultimate_system.py      # –ü–æ–ª–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
‚îú‚îÄ‚îÄ generate_synthetic.py        # –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö
‚îî‚îÄ‚îÄ requirements.txt             # –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
```

## üéÅ –û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- **üéØ –ü–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏** –Ω–∞ –æ—Å–Ω–æ–≤–µ –ø—Ä–æ—Ñ–∏–ª–µ–π –ø–∞—Ä
- **ü§ù –ö–æ–ª–ª–∞–±–æ—Ä–∞—Ç–∏–≤–Ω–∞—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è** –ø–æ –ø–æ–≤–µ–¥–µ–Ω–∏—é –ø–æ—Ö–æ–∂–∏—Ö –ø–∞—Ä  
- **üß† –°–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∏–π –ø–æ–∏—Å–∫** —Å –≤–µ–∫—Ç–æ—Ä–Ω—ã–º–∏ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è–º–∏
- **üèÜ Learning to Rank** –¥–ª—è –æ–ø—Ç–∏–º–∞–ª—å–Ω–æ–≥–æ —Ä–∞–Ω–∂–∏—Ä–æ–≤–∞–Ω–∏—è
- **‚ö° –í—ã—Å–æ–∫–∞—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å** —Å –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ–º –∏ fallback
- **üìä –ú–µ—Ç—Ä–∏–∫–∏ –∫–∞—á–µ—Å—Ç–≤–∞** –¥–ª—è –æ—Ü–µ–Ω–∫–∏ –≤—Å–µ—Ö –ø–æ–¥—Ö–æ–¥–æ–≤
- **üéöÔ∏è –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã** –¥–ª—è —Ç–æ–Ω–∫–æ–π –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
- **üîÑ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ** –º–µ–∂–¥—É –¥–æ—Å—Ç—É–ø–Ω—ã–º–∏ –º–æ–¥–µ–ª—è–º–∏

## üåü –ì–æ—Ç–æ–≤–æ –∫ production!

‚úÖ **–í—Å–µ 7 —Ñ–∞–∑ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã –∏ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω—ã**  
‚úÖ **Production-ready FastAPI —Å–µ—Ä–≤–∏—Å**  
‚úÖ **Comprehensive –º–µ—Ç—Ä–∏–∫–∏ –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥**  
‚úÖ **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π fallback –∏ error handling**  
‚úÖ **–ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏**  
‚úÖ **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Node.js backend**  

**–í–∞—à–∞ AI —Å–∏—Å—Ç–µ–º–∞ –≥–æ—Ç–æ–≤–∞ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é! üöÄ**