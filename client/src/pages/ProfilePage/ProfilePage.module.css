/* --- Mobile First (Default Styles) --- */
/* Все блоки идут в одной колонке. Просто и эффективно для мобильных. */
/* Это наш базовый лейаут, как в Шаге 4 вашего гайда. */
.pageGrid {
  display: flex;
  flex-direction: column;
  gap: var(--space-5);
  padding: var(--space-4) var(--space-4) 0; /* без нижнего отступа */
  height: 100%;
  overflow-y: auto; /* Позволяем всей странице скроллиться */
  -webkit-overflow-scrolling: touch;
}

.widgets {
  display: flex;
  flex-direction: column;
  gap: var(--space-5);
}

.loader {
  display: flex;
  align-items: center;
  justify-content: center;
  height: 100%;
  font-size: 1.2rem;
  color: var(--color-text-secondary);
}


/* --- Breakpoint: Планшеты (768px) --- */
/* Начинаем прогрессивное улучшение с min-width, как рекомендовано. */
@media (min-width: 768px) {
  .pageGrid {
    display: grid;
    /* Две колонки: левая для профиля, правая для ленты. */
    grid-template-columns: 320px 1fr; 
    grid-template-rows: auto auto 1fr;
    grid-template-areas:
      "header  feed"
      "info    feed"
      "widgets widgets";
    gap: var(--space-6);
    padding: var(--space-6) var(--space-6) 0; /* без нижнего отступа */
    overflow: hidden; /* Скролл теперь внутри блоков, а не всей страницы */
  }

  .header { grid-area: header; }
  .info { grid-area: info; }
  .feed { grid-area: feed; min-height: 0; } /* min-height важен для скролла внутри */
  .widgets {
    grid-area: widgets;
    flex-direction: row; /* На планшете виджеты идут в ряд */
  }
  
  /* Заставляем виджеты делить пространство поровну */
  .widgets > * {
    flex: 1; 
  }
}


/* --- Breakpoint: Десктопы (1200px) --- */
/* Радикально перестраиваем лейаут для больших экранов. */
@media (min-width: 1200px) {
  .pageGrid {
    /* Классический трехколоночный дашборд */
    grid-template-columns: 320px 1fr 320px;
    grid-template-rows: auto 1fr;
    grid-template-areas:
      "header feed widgets"
      "info   feed widgets";
  }

  .widgets {
    /* Правая колонка полностью под виджеты */
    grid-area: widgets;
    flex-direction: column; /* На десктопе виджеты снова в колонке */
    gap: var(--space-6);
  }
  
  /* Сбрасываем flex-grow с планшетной версии */
  .widgets > * {
    flex: initial; 
  }
}